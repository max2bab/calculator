<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì›” ë‚©ì… ë³µë¦¬ ì ê¸ˆ + ê±°ì¹˜ ê³„ì‚°ê¸°</title>
    
    <style>
body {
    font-family: Arial, sans-serif;
    background-color: #f4f7f8;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    margin: 0;
    padding: 20px 0; 
}

.calculator-container {
    background-color: #fff;
    padding: 25px; 
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    width: 95%; 
    max-width: 900px; 
    margin: 0 auto; 
}

h1 {
    text-align: center;
    color: #333;
    margin-top: 0;
    margin-bottom: 10px; 
}

.description {
    text-align: center;
    color: #6c757d;
    font-size: 14px;
    margin-bottom: 15px;
}

.input-group {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
}

label {
    flex-basis: 45%; 
    margin-bottom: 0;
    font-weight: bold;
    color: #555;
    font-size: 14px;
}

input[type="number"] {
    flex-basis: 50%;
    width: auto;
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 5px;
    box-sizing: border-box;
    font-size: 16px;
}

button {
    width: 100%;
    padding: 10px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 18px;
    font-weight: bold;
    margin-top: 10px; 
    transition: background-color 0.3s;
}

button:hover {
    background-color: #0056b3;
}

hr {
    border: 0;
    height: 1px;
    background: #eee;
    margin: 15px 0;
}

h2 {
    margin-top: 0;
    margin-bottom: 10px;
}

/* ì˜¤ë¥˜ ìœ ë°œí•˜ë˜ .result-box p ë¸”ë¡ì„ ê¹”ë”í•˜ê²Œ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤. */
#result-interest-after-tax {
    color: red;
    font-weight: bold;
}
    </style>
    </head>
<body>
    <div class="calculator-container">
        <h1>ğŸ’° ì›” ë‚©ì… ë³µë¦¬ ì ê¸ˆ + ê±°ì¹˜ ê³„ì‚°ê¸°</h1>
        <p class="description">ì›” ë‚©ì…ì•¡ê³¼ ê¸°ê°„ì„ ì„¤ì •í•˜ì—¬ ì´ ë§Œê¸° ê¸ˆì•¡ì„ ê³„ì‚°í•©ë‹ˆë‹¤. (ì›” ë³µë¦¬ ì ìš©)</p>

<div class="input-group">
    <label for="monthlyDeposit">ì›” ë‚©ì…ì•¡ (ë§Œì›):</label>
    <input type="number" id="monthlyDeposit" min="0" required>
</div>
        
<div class="input-group">
    <label for="rate">ì—° ì´ììœ¨ (%):</label>
    <input type="number" id="rate" step="0.01" min="0" required>
</div>

        <div class="input-group period-group">
            <label for="depositYears">ë‚©ì… ê¸°ê°„ (ë…„):</label>
            <input type="number" id="depositYears" value="5" min="0" required>
        </div>

        <div class="input-group period-group">
            <label for="holdingYears">ê±°ì¹˜ ê¸°ê°„ (ë…„):</label>
            <input type="number" id="holdingYears" value="5" min="0" required>
        </div>
        
        <div class="input-group">
            <label for="taxRate">ì´ìì†Œë“ì„¸ìœ¨ (%):</label>
            <input type="number" id="taxRate" value="15.4" step="0.01" min="0" max="100" required>
        </div>
        
        <button onclick="calculateFinalValue()">ì´ ë§Œê¸° ê¸ˆì•¡ ê³„ì‚°í•˜ê¸°</button>

        <hr>

        <h2>ğŸ“Š ê³„ì‚° ê²°ê³¼ (ì´ <span id="total-years">10</span>ë…„ ë§Œê¸°)</h2>
        <div class="result-box">
            <p id="result-total-principal">ì´ ë‚©ì… ì›ê¸ˆ: <span>0</span> ë§Œì›</p>
            <p id="result-interest-before-tax">ì„¸ì „ ì´ì: <span>0</span> ë§Œì›</p>
            <p id="result-tax-amount" class="tax-info">ì„¸ê¸ˆ(ì´ìì†Œë“ì„¸): <span>0</span> ë§Œì›</p>
            <p id="result-interest-after-tax">ì„¸í›„ ì´ì: <span>0</span> ë§Œì›</p>
            <p id="result-final-value" class="highlight-result">ì„¸í›„ ì´ ë§Œê¸° ê¸ˆì•¡: <span class="highlight">0</span> ë§Œì›</p>
        </div>
    </div>

    <script>
function calculateFinalValue() {
    // 1. ì…ë ¥ ê°’ ê°€ì ¸ì˜¤ê¸°
    const PMT = parseFloat(document.getElementById('monthlyDeposit').value);  // ì›” ë‚©ì…ì•¡ (ë§Œì›)
    // const rate = parseFloat(document.getElementById('rate').value);          // ì—° ì´ììœ¨ (%) - ì´ ë¶€ë¶„ì€ ë¬´ì‹œë©ë‹ˆë‹¤.
    const n_pay = parseInt(document.getElementById('depositYears').value);  // ë‚©ì… ê¸°ê°„ (ë…„)
    const n_hold = parseInt(document.getElementById('holdingYears').value); // ê±°ì¹˜ ê¸°ê°„ (ë…„)
    const taxRate = parseFloat(document.getElementById('taxRate').value);   // ì„¸ìœ¨ (%)
    
    // 2. ê³ ì • ê°’ ë° ìœ íš¨ì„± ê²€ì‚¬
    const totalYears = n_pay + n_hold;
    
    // ***** ìˆ˜ì •ëœ ë¶€ë¶„: ì—° ì´ììœ¨ì„ 3.5% (0.035)ë¡œ ê°•ì œ ê³ ì • *****
    const r_annual = 0.035; 
    
    const t = taxRate / 100;         // ì„¸ìœ¨ (ì†Œìˆ˜ì )
    const totalMonths_pay = n_pay * 12; // ì´ ë‚©ì… ê°œì›” ìˆ˜
    
    // ìœ íš¨ì„± ê²€ì‚¬
    if (isNaN(PMT) || isNaN(n_pay) || isNaN(n_hold) || isNaN(taxRate) || 
        PMT < 0 || n_pay < 0 || n_hold < 0 || taxRate < 0) {
        alert("ì›” ë‚©ì…ì•¡, ê¸°ê°„, ì„¸ìœ¨ì— ìœ íš¨í•œ ì–‘ìˆ˜ ê°’ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”.");
        return;
    }
    
    document.getElementById('total-years').textContent = totalYears;


    // --- 3. ì´ ë‚©ì… ì›ê¸ˆ ê³„ì‚° ---
    const totalPrincipal = PMT * totalMonths_pay;

    
    // --- 4. ì„¸ì „ ì´ ì´ì ê³„ì‚° (ë‹¨ë¦¬ ì ìš©) ---
    let totalInterestBeforeTax = 0;

    // A. ë‚©ì… ê¸°ê°„ ë™ì•ˆ ë°œìƒí•˜ëŠ” ë‹¨ë¦¬ ì´ì (ì ê¸ˆ ë‹¨ë¦¬ ê³µì‹)
    // ì—° ì´ìœ¨ r_annual (0.035)ì´ ì‚¬ìš©ë©ë‹ˆë‹¤.
    if (n_pay > 0) {
        const simpleDepositInterest = PMT * totalMonths_pay * r_annual * ((totalMonths_pay + 1) / (2 * 12));
        totalInterestBeforeTax += simpleDepositInterest;
    }


    // B. ê±°ì¹˜ ê¸°ê°„ ë™ì•ˆ ë°œìƒí•˜ëŠ” ë‹¨ë¦¬ ì´ì (ê±°ì¹˜ ê¸°ê°„ ë™ì•ˆ ì´ ì›ê¸ˆì— ëŒ€í•œ ë‹¨ë¦¬)
    // ì—° ì´ìœ¨ r_annual (0.035)ì´ ì‚¬ìš©ë©ë‹ˆë‹¤.
    if (n_hold > 0) {
        const holdingInterest = totalPrincipal * r_annual * n_hold;
        totalInterestBeforeTax += holdingInterest;
    }


    // --- 5. ì„¸ê¸ˆ ë° ìµœì¢… ê¸ˆì•¡ ê³„ì‚° ---
    
    // ì„¸ê¸ˆ (ì´ìì†Œë“ì„¸)
    const taxAmount = totalInterestBeforeTax * t;

    // ì„¸í›„ ì´ì
    const interestAfterTax = totalInterestBeforeTax - taxAmount;

    // ì„¸í›„ ìµœì¢… ë§Œê¸° ê¸ˆì•¡
    const finalValue = totalPrincipal + interestAfterTax;


    // --- 6. ê²°ê³¼ë¥¼ HTMLì— í‘œì‹œ (ì†Œìˆ˜ì  ë‘˜ì§¸ ìë¦¬ê¹Œì§€) ---
    
    document.getElementById('result-total-principal').querySelector('span').textContent = totalPrincipal.toFixed(2);
    document.getElementById('result-interest-before-tax').querySelector('span').textContent = totalInterestBeforeTax.toFixed(2);
    document.getElementById('result-tax-amount').querySelector('span').textContent = taxAmount.toFixed(2);
    document.getElementById('result-interest-after-tax').querySelector('span').textContent = interestAfterTax.toFixed(2);
    document.getElementById('result-final-value').querySelector('span').textContent = finalValue.toFixed(2);
}
    </script>
    </body>
</html>
